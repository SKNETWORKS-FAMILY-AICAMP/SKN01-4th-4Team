# SKN01-4th-4Team
Vue + Django + FastAPI + Deep Learning Local Server ì„œë¹„ìŠ¤

### ğŸ§‘ğŸ»â€ğŸŒ¾ TextFarmers(TF)

# 1. Introduction Team (íŒ€ ì†Œê°œ)
<table align="center">
  <tbody>
    <tr>
      <td align="center">
        <div>
          <img src="https://github.com/user-attachments/assets/7cbbcc77-39de-4dc6-be12-a2879ce15a0b"width="100px;"height="100px;" alt=""/>
          <a href="https://github.com/yhoon3002"><div align=center>íŒ€ì¥ ì„ì˜í›ˆ</div></a>
        </div>
      </td>
      <td align="center">
        <div>
          <img src="https://github.com/user-attachments/assets/c7df2eb9-d897-4acc-87a9-3cdbca2863a6"width="100px;"height="100px;"" alt=""/>
          <a href="https://github.com/2kilometer"><div align=center>ì´ê²½ë¯¼</div></a>
        </div>
      </td>
      <td align="center">
        <div>
          <img src="https://github.com/user-attachments/assets/4d97616d-34b6-4495-aa18-dc1bb2733d4a"width="100px;"height="100px;" alt=""/>
          <a href="https://github.com/JUNGUIHEON"><div align=center>ì •ì˜í—Œ</div></a>
        </div>
      </td>
    </tr>
  </tbody>
</table>

<br><br>

# 2. Introduction Project (í”„ë¡œì íŠ¸ ê°œìš”)
### ğŸ§¡ ì†Œê°œ ğŸ§¡
**ì˜ë£Œ ë°ì´í„°ë¥¼ í™œìš©í•œ ì±—ë´‡ ì„œë¹„ìŠ¤**  <br><br>
### ğŸ’š í•„ìš”ì„± ğŸ’š
![image](https://github.com/user-attachments/assets/7e8e6655-ef8e-47b0-a836-afbee9a00fa9)
í˜„ëŒ€ ì‚¬íšŒì—ì„œ ì˜ë£Œ ë°ì´í„°ì˜ ì¤‘ìš”ì„±ì´ ì ì  ì»¤ì§€ê³  ìˆìŠµë‹ˆë‹¤.</br>
2024ë…„ ì˜ë£Œ ì •ì±… ì¶”ì§„ ë°˜ëŒ€ ì§‘ë‹¨ í–‰ë™(aka. ì˜ì‚¬ íŒŒì—…)ê³¼ ê°™ì€ ì‚¬ê±´ìœ¼ë¡œ ì¸í•´</br>
ìš°ë¦¬ê°€ ì–¸ì œë“ ì§€ ì›í•  ë•Œ í•„ìš”í•œ ì§„ë£Œë¥¼ ë°›ì„ ìˆ˜ ìˆë‹¤ëŠ” ì•ˆì •ì„±ì´ ë–¨ì–´ì§€ë©°,</br>
ìš°ë¦¬ ìŠ¤ìŠ¤ë¡œ ìµœì†Œí•œì˜ ì˜ë£Œ ì§€ì‹ì„ ìŠµë“í•´ì•¼ í•  í•„ìš”ì„±ì´ ìƒê²¼ìŠµë‹ˆë‹¤.</br>
í•˜ì§€ë§Œ ë³µì¡í•œ ì˜ë£Œ ì •ë³´ì™€ ë°ì´í„°ëŠ” ì¼ë°˜ ëŒ€ì¤‘ì—ê²ŒëŠ” ì ‘ê·¼í•˜ê¸° ì–´ë µê³ </br>
ì˜ë£Œê³„ì— ì§€ì¸ì´ ìˆëŠ” ê²ƒì´ ì•„ë‹ˆë¼ë©´  ë¬¼ì–´ë³¼ ê³³ ì—­ì‹œ ë§ˆë•…ì¹˜ ì•ŠìŠµë‹ˆë‹¤.</br>
ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ë”¥ëŸ¬ë‹ ê¸°ìˆ ë¡œ ì˜ë£Œ ë°ì´í„°ë¥¼ í•™ìŠµí•˜ì—¬ ì ‘ê·¼í•˜ê¸° ì–´ë ¤ì› ë˜ ì˜ë£Œ ë°ì´í„°ë¥¼</br>
ëª¨ë‘ê°€ ì‰½ê²Œ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ì‚¬ìš©ì ì¹œí™”ì ì¸ ì±—ë´‡ ì„œë¹„ìŠ¤ë¥¼ ê°œë°œí•˜ê³ ì í•©ë‹ˆë‹¤.


<br><br>
### ğŸ’› ì£¼ìš” ì„œë¹„ìŠ¤ ğŸ’›
- ê±´ê°• ì§„ë‹¨ ì±—ë´‡ ì„œë¹„ìŠ¤
- ì˜ë£Œ ì •ë³´ ì œê³µ
- ì„±ê²©ìœ í˜•ê²€ì‚¬(MBTI) Tí˜•ê³¼ Fí˜• ì‘ë‹µì„ ì„ íƒ

 <br><br>
 

# 3. ERD êµ¬ì„±
![image](https://github.com/user-attachments/assets/cb79aba5-ca4c-4cdd-88ec-a622608aba62)


<br><br><br>

# 4. Backend ì• ìì¼ ë³´ë“œ - ìš”êµ¬ì‚¬í•­ ì •ì˜ì„œ
### â„¹ï¸ ì• ìì¼ ë³´ë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ 
```
ê³¼ê±° ì •ì˜ì„œë“¤ì„ ì¼ì¼íˆ ì‘ì„±í•˜ì˜€ì§€ë§Œ ë¹ ë¥¸ ì†ë„ë¡œ ë¬´ì–¸ê°€ë¥¼ ê°œë°œí•˜ëŠ”ë° í•œê³„ê°€ ìˆìŠµë‹ˆë‹¤.
ì²˜ìŒë¶€í„° ë§ì€ ê²ƒë“¤ì„ ë¹Œë“œì—…í•˜ë©´ì„œ ë¹ ë¥¸ ìƒì‚°ì„±ì„ ê¸°ë°˜ìœ¼ë¡œ ì›€ì§ì´ë ¤ë©´ ë°˜ë“œì‹œ ì• ìì¼í•´ì•¼í•©ë‹ˆë‹¤.
ê³ ë¡œ í­í¬ìˆ˜ ì„¤ê³„ ë°©ì‹ì´ ì•„ë‹Œ ì• ìì¼ í”„ë¡œì„¸ìŠ¤ ë°©ì‹ìœ¼ë¡œ ì• ìì¼ ë³´ë“œë¥¼ ì‘ì„±í•˜ë©´ì„œ ì§„í–‰í–ˆìŠµë‹ˆë‹¤.

ì• ìì¼ ë³´ë“œëŠ” ìì²´ì ìœ¼ë¡œ ì œëª©ì´ ìš”êµ¬ ì‚¬í•­ì„ ë‚´í¬í•˜ë©° ê° ì¹´ë“œ ë‚´ë¶€ì—ëŠ” ì •ì˜í•œ Domainì˜ ì„¸ë¶€ ì‚¬í•­ì´ ê¸°ë¡ë©ë‹ˆë‹¤.
ê³ ë¡œ ë¹ ë¥´ê²Œ íŒ€ì›ë“¤ê³¼ í˜‘ì—… í•  ìˆ˜ ìˆê³  ì†Œí†µ ë¹„ìš©ì„ ìµœì†Œí™”ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì‘ì€ ê²ƒ ê°™ì§€ë§Œ ì´ì™€ ê°™ì€ ê²ƒë“¤ì´ ìŒ“ì—¬ì„œ ì•„ì£¼ ê¸°ë¯¼í•˜ê³  ë¯¼ì²©í•œ ì¡°ì§ì„ ë§Œë“¤ì–´ ëƒ…ë‹ˆë‹¤.
```

<br><br><br>

# 5. Frontend ì• ìì¼ ë³´ë“œ - í™”ë©´ ì„¤ê³„ì„œ
![image](https://github.com/user-attachments/assets/6e391887-b9a4-4cb7-aa13-71ec49599455)


<br><br><br>

# 6. FastAPI ì• ìì¼ ë³´ë“œ - AI ì„œë¹™ ì„¤ê³„ì„œ
![image](https://github.com/user-attachments/assets/25db9a4a-a01c-4199-8dba-96f37b90066e)


<br><br><br>

# 7. Ai-Client ì• ìì¼ ë³´ë“œ - AI ì„œë¹™ ì„¤ê³„ì„œ
![image](https://github.com/user-attachments/assets/9ad8b650-2fc2-4aa9-a132-44e20ab309c8)


<br><br><br>

# 7. ì‹œìŠ¤í…œ êµ¬ì„±ë„
![image](https://github.com/user-attachments/assets/d7c59ec3-6f89-4948-aea5-40ab30ee0854)
![image](https://github.com/user-attachments/assets/43f264a9-b2fc-4405-9a4a-e235cb9da50d)


<br><br><br>

# 8. ChatBot Service
## ğŸ“ Ai-Client
### ì‚¬ìš©ìì˜ ì§ˆë¬¸ ì˜ë„ íŒŒì•… ëª¨ë¸ í•™ìŠµ
- OpenAI APIì˜ "gpt-3.5-turbo"ëª¨ë¸ì— í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§ì„ í†µí•œ êµ¬í˜„</br>
-> ë¶„ë‹¹ ìš”ì²­ìˆ˜ ì œí•œìœ¼ë¡œ ì¸í•´ ë¶ˆê°€ëŠ¥</br>
- BioBERT, KoBERT ëª¨ë¸ ì‚¬ìš©</br>
-> ì •í™•ë„ê°€ ë„ˆë¬´ ë‚®ì•„ ì‚¬ìš©ì´ ë¶ˆê°€ëŠ¥</br>
- ìµœì¢…ì ìœ¼ë¡œ BERT ëª¨ë¸ì˜ ë‹¤êµ­ì  ë²„ì „ì„ ì‚¬ìš©í•¨.</br>
Accuracy: 0.9724</br>
Precision: 0.9725</br>
Recall: 0.9724</br>
F1 Score: 0.9724</br>
97%ì˜ ì •í™•ë„ë¡œ í”„ë¡œì íŠ¸ì— ì‚¬ìš©í•˜ê¸°ë¡œ ê²°ì •</br>
</br>

### ì‚¬ìš©ìì˜ ì§ˆë¬¸ & ë‹µë³€ ë°ì´í„°ë¥¼ ì„ë² ë”©í•˜ê³  ìœ ì‚¬ë„ ë¹„êµ
- ë‹¨ì–´ì˜ ë¹ˆë„ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë²¡í„°í™”ì‹œí‚¤ê³  cosineìœ ì‚¬ë„ ë¹„êµ</br>
-> ë‹¨ì–´ì˜ ì‹œì œì™€ ì¡°ì‚¬ë“±ì´ ì™„ì „íˆ ë™ì¼í•´ì•¼ ìœ ì‚¬ë„ê°€ ìˆë‹¤ê³  íŒë‹¨í•˜ì—¬ ì •í™•ë„ê°€ ë–¨ì–´ì§.</br>
- í˜•íƒœì†Œë¥¼ ë¶„ì„í•˜ê³  ì–´ê°„ì„ ì¶”ì¶œí•˜ì—¬ ë²¡í„°í™”ì‹œí‚¤ê³  cosineìœ ì‚¬ë„ ë¹„êµ</br>
-> ì •í™•ë„ê°€ ì¡°ê¸ˆì€ ìƒìŠ¹í–ˆì§€ë§Œ ì—¬ì „íˆ ë¬¸ì¥ì˜ ë¬¸ë§¥ì„ ì´í•´í•˜ì§€ ëª»í•˜ê³  ë‹¨ìˆœíˆ ê°™ì€ ë‹¨ì–´ì˜ ì¡´ì¬ìœ ë¬´ë§Œìœ¼ë¡œ ìœ ì‚¬ë„ë¥¼ ë¹„êµ</br>
- BioBERTëª¨ë¸ì„ ì‚¬ìš©í•˜ì—¬ ì„ë² ë”©</br>
-> ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶©ëŒì´ìŠˆì™€ ì„ë² ë”©ì— ì†Œìš”ë˜ëŠ” ì‹œê°„ì´ ë„ˆë¬´ ê¸¸ì–´ ì‚¬ìš©í•˜ê¸° ì–´ë ¤ì›€</br>
- OpenAI APIì„ ì´ìš©í•­ ì„ë² ë”© ë° faissë¥¼ í†µí•œ ìœ ì‚¬ë„ ë¹„êµ</br>
-> ë¬¸ë§¥ì„ ì´í•´í•˜ëŠ” ê³ ì°¨ì› ë²¡í„°ë¡œ ì„ë² ë”©ì´ ê°€ëŠ¥í•˜ê³  ëŒ€ê·œëª¨ì˜ ê³ ì°¨ì› ë²¡í„° ë°ì´í„°ì…‹ì— ìœ ë¦¬í•œ faissë¥¼ ì‚¬ìš©í•´ ì •í™•ë„ ìƒìŠ¹</br>

### ë‹µë³€ì„ MBTI ê²€ì‚¬ Tì„±í–¥ê³¼ Fì„±í–¥ì— ë§ì¶”ì–´ ë¬¸ì²´ ë³€í™˜
- OpenAI APIë¥¼ ì‚¬ìš©í•˜ì—¬ "gpt-3.5-turbo"ëª¨ë¸ì„ í†µí•´ í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§ì„ ì‚¬ìš©í•˜ì—¬ ê¸°ëŠ¥ êµ¬í˜„
```
    ë‚´ê°€ "ë¬¸ì²´ ë³€í™˜ <INTENTION> <TYPE> <PHASE>"ë¼ëŠ” ë¬¸ë‹¨ì„ ì¤„ê±°ì•¼. 
    <INTENTION>ì—ëŠ” í—¬ìŠ¤ì¼€ì–´ ì§ˆë¬¸ ëª©ì  ë°ì´í„°ê°€, <TYPE>ì—ëŠ” ì•„ë˜ì—ì„œ ì •ì˜í•œ ë³€í™˜ ì¡°ê±´ì˜ ê°’ì´, <PHASE>ì—ëŠ” ë„ˆê°€ ë³€í™˜í•´ì•¼í•˜ëŠ” ë¬¸ì²´ì˜ ë‹¨ë½ì´ ë“¤ì–´ê°€ ìˆì–´.
    <INTENTION> ëª©ì ì— ë§ê²Œ, <TYPE> ì¡°ê±´ì— ë§ê²Œ <PHASE>ì˜ ë¬¸ì²´ë¥¼ ë°”ê¿”ì¤˜.
    ìµœì¢… ì¶œë ¥ì€ ì¶œë ¥ ì¡°ê±´ì— ë§ê²Œ ì¶œë ¥í•´ì¤˜.
    
    ë³€í™˜ ì¡°ê±´: 
    - ë§Œì•½ TYPEì´ "F"ë¼ë©´:
        1. ì•„í””ì— ê³µê°í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì‹œì‘í•´.
        2. 2ì¸ì¹­ìœ¼ë¡œ ì§€ì¹­í•´.
        3. ì¹œí•œ ì§€ì¸ê³¼ ë‚˜ëˆ„ëŠ” êµ¬ì–´ì²´ì— ê°€ê¹ê²Œ ì‘ì„±í•´.
        4. ë‹¨ë½ ë‹¹ ì•ˆë¶€ì™€ ê±±ì •ì˜ ë§ì„ í•œ ë¬¸ì¥ ì´ìƒ ë„£ì–´ì¤˜.
        5. ë§ˆì§€ë§‰ ë¬¸ì¥ì—ì„œëŠ” íšŒë³µê³¼ ê·¹ë³µì˜ ê¸ì • ë©˜íŠ¸ë¥¼ ë„£ì–´ì¤˜.
    
    - ë§Œì•½ TYPEì´ "T"ë¼ë©´:
        1. ì •ë³´ ì „ë‹¬ì´ ëª…í™•í•˜ê²Œ ê°€ë„ë¡ ê°€ë…ì„± ìˆê²Œ ì‘ì„±í•´.
        2. ì •ë³´ê°€ ë‚˜ì—´ë˜ì–´ ìˆë‹¤ë©´ <ul style="list-style-position:inside;">ë¡œ ë‚˜ì—´í•´.
        3. ë§ˆì§€ë§‰ì„ ê²°ë¡  í•œ ë¬¸ì¥ìœ¼ë¡œ ì‘ì„±í•´.
    
    ì¶œë ¥ ì¡°ê±´:
    - ë§Œì•½ ë¬¸ë‹¨ì´ ë‚˜ëˆ ì¡Œë‹¤ë©´:
        1. <p>íƒœê·¸ë¡œ ë¶„ë¦¬í•´ì„œ ì¶œë ¥
        2. ë„ì–´ì“°ê¸°, \n ì—†ì´ ì¶œë ¥
```




<br><br><br>

# 9. Autonomous Deploy (ìë™ ë°°í¬ ì§„í–‰ ì ˆì°¨)
ìˆ˜ë™ ë°°í¬ëŠ” ê°œë°œìê°€ ì§ì ‘ ë¡œì»¬ í™˜ê²½ì—ì„œ ë¹Œë“œí•˜ê³  í´ë¼ìš°ë“œë¡œ ë°°í¬í•˜ëŠ” ê³¼ì •ì„ ìˆ˜í–‰í•˜ëŠ” ë°˜ë©´, ìë™ ë°°í¬ëŠ” ì½”ë“œ ë³€ê²½ì´ ê°ì§€ë˜ë©´ CI/CD íŒŒì´í”„ë¼ì¸ì„ í†µí•´ ìë™ìœ¼ë¡œ ë¹Œë“œ, í…ŒìŠ¤íŠ¸, ë°°í¬ë˜ì–´ ê°œë°œ ìƒì‚°ì„±ê³¼ ì•ˆì •ì„±ì„ ë†’ì…ë‹ˆë‹¤.

#### CI/CD ì „ì²´ íë¦„
  - **ê°œë°œì ì‘ì—… ë° í…ŒìŠ¤íŠ¸** <br>
    : ê° ë„ë©”ì¸ì— ë§ì¶° ë°±ë¡œê·¸ ì‘ì—…ì„ ì§„í–‰í•©ë‹ˆë‹¤. í…ŒìŠ¤íŠ¸ê°€ CI(Continuous Integration)ë¥¼ í†µê³¼í•˜ë©´ PR(Pull Request)ì„ ìŠ¹ì¸í•©ë‹ˆë‹¤.
  - **CIì—ì„œì˜ ë¹Œë“œ** <br>
    : CIê°€ í†µê³¼ë˜ë©´ CD(Continuous Deployment)ë¡œ ë„˜ì–´ê°€ì„œ ë°°í¬ê°€ ì‹œì‘ë©ë‹ˆë‹¤. ì´ë•Œ npm buildë¥¼ ì‹¤í–‰í•˜ì—¬ í”„ë¡œì íŠ¸ë¥¼ ë¹Œë“œí•©ë‹ˆë‹¤.
  - **ë¹Œë“œ ê²°ê³¼ë¬¼ ìƒì„±** <br>
    : ë¹Œë“œ í›„ì—ëŠ” HTML, CSS, JavaScript, ê·¸ë¦¬ê³  ì´ë¯¸ì§€ ë“±ì˜ ë¦¬ì†ŒìŠ¤ê°€ ìƒì„±ë©ë‹ˆë‹¤.
  - **AWSë¡œì˜ ì „ì†¡** <br>
    : ìƒì„±ëœ ì •ë³´ëŠ” SCP(Secure Copy Protocol)ë¥¼ ì‚¬ìš©í•˜ì—¬ AWS EC2 ì¸ìŠ¤í„´ìŠ¤ë¡œ ì „ì†¡ë©ë‹ˆë‹¤.
  - **Nginx ì„¤ì • ë° êµ¬ë™** <br>
    : ì „ì†¡ëœ íŒŒì¼ì€ EC2 ì¸ìŠ¤í„´ìŠ¤ì—ì„œ Nginxë¥¼ ì‚¬ìš©í•˜ì—¬ í˜¸ìŠ¤íŒ…ë©ë‹ˆë‹¤. ì´ë•Œ docker-compose.yml íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ Nginxë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤.
      NginxëŠ” ì–´ë–¤ íŒŒì¼ë“¤ì„ ì„œë¹™í• ì§€ ì„¤ì •í•˜ë©°, ì´ ì •ë³´ë“¤ì€ conf í´ë”ì— ì €ì¥ë©ë‹ˆë‹¤.
  - **ë°°í¬** <br>
    : docker-compose up -d ëª…ë ¹ì„ í†µí•´ Nginxê°€ ì„¤ì •ëœ í›„, Frontend ì½”ë“œê°€ EC2 ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ë™ì‘í•©ë‹ˆë‹¤.

<br><br>

## ğŸ“ Frontend
### CI êµ¬ì„±
### 1. Git ì €ì¥ì†Œì˜ Actions íƒ­ì—ì„œ ci.yml íŒŒì¼ ìƒì„±í•˜ê¸°
<img src="https://github.com/user-attachments/assets/b2b8eda5-9f59-497d-9595-b9c0b909e96c"/>

### 2ï¸. CI ì„¤ì •
```yaml
name: CI (Continuous Integration)

on:
  push:
    branches: ["main"]

jobs:
  build:
    name: Frontend CI
    runs-on: ubuntu-latest
    steps:
    - name: Checkout repository
      uses: actions/checkout@v3

    - name: Set up Node.js
      uses: actions/setup-node@v2
      with:
        node-version: '20'

    - name: Cache dependencies
      id: cache
      uses: actions/cache@v3
      with:
        path: '**/node_modules'
        key: ${{ runner.os }}-node-${{ hashFiles('**/package-lock.json') }}
        restore-keys: |
          ${{ runner.os }}-node-

    - name: Install Dependencies
      if: steps.cache.outputs.cache-hit != 'true'
      run: |
        npm ci

    - name: Create .env development for CI
      run: |
        pwd
        echo "${{ secrets.ENV_DEVELOPMENT }}" > .env.development
        cat .env.development

    - name: Real Test
      run: |
        npm run test:unit

    - name: send FRONTEND_TEST_FINISH_TRIGGER
      run: |
        curl -S -X POST https://api.github.com/repos/${{ github.repository }}/dispatches \
          -H 'Accept: application/vnd.github.v3+json' \
          -u ${{ secrets.GHCR_TOKEN }} \
          -d '{"event_type": "FRONTEND_TEST_FINISH_TRIGGER", "client_payload": { "repository": "'"$GITHUB_REPOSITORY"'" }}'
```

### 4. Actionsì—ì„œ CI êµ¬ë™ í™•ì¸í•˜ê¸°
<img src="https://github.com/user-attachments/assets/91ff498e-c28f-4062-9f38-593936610521"/>


### CD êµ¬ì„±
### 1. CI êµ¬ì„±ì˜ 1ë²ˆ ê³¼ì •ê³¼ ë™ì¼
### 2. CD ì„¤ì •
```yaml
name: CD (Continuous Deploy)

on:
  repository_dispatch:
    types: [FRONTEND_TEST_FINISH_TRIGGER]

jobs:
  build:
    name: build-app
    runs-on: ubuntu-latest
    steps:
    - name: Get Github Actions IP
      id: ip
      uses: haythem/public-ip@v1.2

    - name: Configure AWS IAM Credentials
      uses: aws-actions/configure-aws-credentials@v1
      with:
        aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}
        aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
        aws-region: ap-northeast-2

    - name: Checkout repository
      uses: actions/checkout@v3

    - name: Setup node.js
      uses: actions/setup-node@v2
      with:
        node-version: '20'

    - name: Cache dependencies
      id: cache
      uses: actions/cache@v3
      with:
        path: '**/node_modules'
        key: ${{ runner.os }}-node-${{ hashFiles('**/package-lock.json') }}
        restore-keys: |
          ${{ runner.os }}-node-

    - name: Install Dependencies
      if: steps.cache.outputs.cache-hit != 'true'
      run: |
        npm ci --legacy-peer-deps

    - name: Create .env.production for Continuous Deploy
      run: |
        echo "${{ secrets.ENV_PRODUCTION }}" > .env.production
        cat .env.production

    - name: Build
      run: |
        npm run build
        ls

    - name: Setup SSH
      uses: webfactory/ssh-agent@v0.5.0
      with:
        ssh-private-key: ${{ secrets.PRIVATE_KEY }}

    - name: Add Github Actions IP to Security Group
      run: |
        aws ec2 authorize-security-group-ingress --group-id ${{ secrets.AWS_SG_ID }} --protocol tcp --port 22 --cidr ${{ steps.ip.outputs.ipv4 }}/32

    - name: SCP Action
      uses: appleboy/scp-action@master
      with:
        host: ${{ secrets.HOST_IP }}
        username: ec2-user
        key: ${{ secrets.PRIVATE_KEY }}
        source: "./dist/**"
        target: "/home/ec2-user/text-farmer/actions-frontend"

    - name: Remove Github Actions IP From Security Group
      run: |
        aws ec2 revoke-security-group-ingress --group-id ${{ secrets.AWS_SG_ID }} --protocol tcp --port 22 --cidr ${{ steps.ip.outputs.ipv4 }}/32

    - name: SSH Agent Cleanup
      if: ${{ always() }}
      uses: webfactory/ssh-agent@v0.5.0
      with:
        ssh-private-key: ${{ secrets.PRIVATE_KEY }}

  deploy:
    name: Deploy to Production
    needs: build
    runs-on: [ self-hosted, deploy-text-farmer-frontend ]
    steps:
      - name: Get Github Actions IP
        id: ip
        uses: haythem/public-ip@v1.2
        
      - name: Configure AWS IAM Credentials
        uses: aws-actions/configure-aws-credentials@v1
        with:
          aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}
          aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
          aws-region: ap-northeast-2

      - name: Add Github Actions IP to Security Group
        run: |
          aws ec2 authorize-security-group-ingress --group-id ${{ secrets.AWS_SG_ID }} --protocol tcp --port 22 --cidr ${{ steps.ip.outputs.ipv4 }}/32
    
      - name: Deploy to Production
        uses: appleboy/ssh-action@v0.1.10
        with:
          host: ${{ secrets.HOST_IP }}
          username: ec2-user
          key: ${{ secrets.PRIVATE_KEY }}
          script_stop: true
          script: |
            pwd
            cd /home/ec2-user/text-farmer/vue-frontend
            cp -r /home/ec2-user/text-farmer/actions-frontend/dist/* ./html/

            docker image prune -f
            docker logout

            docker-compose up -d

      - name: Remove Github Actions IP From Security Group
        run: |
          aws ec2 revoke-security-group-ingress --group-id ${{ secrets.AWS_SG_ID }} --protocol tcp --port 22 --cidr ${{ steps.ip.outputs.ipv4 }}/32
```

### 3. Githubì—ì„œ Actions Secrets ì¶”ê°€
![image](https://github.com/user-attachments/assets/2b7ca3e8-fcc7-4923-b4c6-54e56b666bca)


### 4. Github Actions Runner ì—°ê²°
- Githubì—ì„œ ì‘ì—…
  - Github Actions Runnerë¥¼ ì„¤ì • (ARM64 Linux)
<img src="https://github.com/user-attachments/assets/45af381a-97ce-4104-b5fd-3226fbf9cb47"/>
<img src="https://github.com/user-attachments/assets/08e78c76-2d55-4cc5-bc98-fda319631720"/>

- AWS, Gitbashì—ì„œ ì‘ì—…
  - AWS ì ‘ì†
    ```bash
    ssh -i "pem" ec2-user@í¼ë¸”ë¦­IPv4ì£¼ì†Œ
    ```
  - frontendìš© action runner ë””ë ‰í† ë¦¬ ìƒì„±
    ```bash
    mkdir frontend-action-runner
    cd frontend-action-runner
    ```
  - curl ëª…ë ¹ì–´ ì…ë ¥
    ```bash
    curl -o actions-runner-linux-arm64-2.317.0.tar.gz -L https://github.com/actions/runner/releases/download/v2.317.0/actions-runner-linux-arm64-2.317.0.tar.gz

    tar xzf ./actions-runner-linux-arm64-2.317.0.tar.gz
    ```
    ì„±ê³µ
    <img src="https://github.com/user-attachments/assets/c88291d6-d8af-45a5-801f-4d7152a8aa01"/>

  - curl ëª…ë ¹ì–´ ì…ë ¥ Githubì˜ runners ëª…ë ¹ì–´ ì‹¤í–‰
  - ë ˆì´ë¸” ì„¤ì •
    <img src="https://github.com/user-attachments/assets/400a577a-f6ea-4bc4-84df-82b252d90fa0"/>
    <img src="https://github.com/user-attachments/assets/94c7a2f9-c89a-4af9-a729-a1230064cd07"/>
    <img src="https://github.com/user-attachments/assets/ff71d1cb-93cb-445d-97dc-ba0ea5b439fc"/>
    <img src="https://github.com/user-attachments/assets/785a3687-a5ec-493e-9aab-8474ae2f1880"/>
    <img src="https://github.com/user-attachments/assets/edd7b035-84fc-47d0-a399-3c8f08de07d8"/>
  - êµ¬ë™
    ```bash
    nohup ./run.sh > run.log 2>&1 &
    ```

## ğŸ“ Backend (Server)
- Django CI ì„¤ì •
  GitHub Actionsë¥¼ ì´ìš©í•˜ì—¬ Django í”„ë¡œì íŠ¸ì˜ CIë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. main ë¸Œëœì¹˜ì—ì„œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ë©°, íŒŒì¼ í˜•ì‹ì€ YAMLì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

- Django í…ŒìŠ¤íŠ¸ ìë™í™”
  ê°œë°œ ì´ˆê¸° ë‹¨ê³„ì—ì„œ Django í…ŒìŠ¤íŠ¸ë¥¼ ìë™í™”í•˜ì—¬ CI íŒŒì´í”„ë¼ì¸ì— í†µí•©í•©ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ find_test.sh ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ëª¨ë“  í…ŒìŠ¤íŠ¸ íŒŒì¼ì„ ìë™ìœ¼ë¡œ ì¸ì‹í•©ë‹ˆë‹¤.
  ```bash
  #!/usr/bin/env bash
  
  TEST_DIRS=$(find . -path ./.venv -prune -o -type d -name 'tests' -print)
  
  APP_TESTS=()
  
  for TEST_DIR in $TEST_DIRS; do
    APP_NAME=$(basename $(dirname $TEST_DIR))
    TEST_FILES=$(find $TEST_DIR -type f -name 'test*.py')
  
    if [ -z "$TEST_FILES" ]; then
      continue
    fi
  
    APP_TESTS+=("${APP_NAME}.tests")
  done
  
  echo "${APP_TESTS[@]}"
```

- Django CD ì„¤ì •
  CIì™€ ìœ ì‚¬í•˜ê²Œ GitHub Actionsë¥¼ í™œìš©í•˜ì—¬ Django í”„ë¡œì íŠ¸ì˜ CDë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.

- Docker ì´ë¯¸ì§€ ë¹Œë“œ ë° ë°°í¬
  ë¹Œë“œ ë‹¨ê³„ì—ì„œ ë‹¤ì¤‘ í™˜ê²½ì„ ì§€ì›í•˜ê¸° ìœ„í•´ Docker Buildxë¥¼ ì‚¬ìš©í•˜ì—¬ ARM64 ì•„í‚¤í…ì²˜ì˜ Docker ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•˜ê³  GitHub Container Registry(GHCR)ì— í‘¸ì‹œí•©ë‹ˆë‹¤.
  ```yaml
  - name: Build and push Docker image
    run: |
      cd <í”„ë¡œì íŠ¸ ì´ë¦„>
      docker buildx build --platform linux/arm64 -f Dockerfile -t ghcr.io/${{ github.actor }}/<ë¹Œë“œí•˜ê³ ì í•˜ëŠ” í™˜ê²½ ì´ë¦„>:latest --push .
  ```

- GitHub Actions Runner ì„¤ì •
  GitHub Actions Runnerë¥¼ ì„¤ì •í•˜ì—¬ Docker ì»¨í…Œì´ë„ˆì™€ í˜¸í™˜ë˜ëŠ” Linux í™˜ê²½ì—ì„œ í”„ë¡œì íŠ¸ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. ARM64 ì•„í‚¤í…ì²˜ë¥¼ ì„ íƒí•˜ì—¬ ë‹¤ì–‘í•œ í™˜ê²½ì—ì„œ ë™ì‘í•˜ë„ë¡ í•©ë‹ˆë‹¤.

- ì‹¤í–‰ ë° ë°°ê²½ ì‹¤í–‰
  GitHub Actions Runnerë¥¼ ë°°ê²½ì—ì„œ ì‹¤í–‰í•˜ë„ë¡ ì„¤ì •í•˜ì—¬ ì§€ì†ì ìœ¼ë¡œ í”„ë¡œì íŠ¸ì˜ ìƒíƒœë¥¼ ëª¨ë‹ˆí„°ë§í•©ë‹ˆë‹¤.
  ```bash
  ./run.sh
  nohup ./run.sh > run.log 2>&1 &
  ```

- Docker Compose ì„¤ì •
  í”„ë¡œì íŠ¸ì˜ ë³µì¡ì„±ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•´ Docker Composeë¥¼ ì‚¬ìš©í•˜ì—¬ Django ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ í•„ìˆ˜ ë°±ì—”ë“œ ì„œë¹„ìŠ¤ë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤.

  ```yaml
  version: '3'
  services:
    django:
      container_name: django
      image: ghcr.io/${GITHUB_ACTOR}/tf-django-server:latest
      command: /app/wait-for-it.sh db:3306 -t 15 -- sh -c "python manage.py migrate && python manage.py runserver 0.0.0.0:8000"
      restart: always
      ports:
        - "8000:8000"
      depends_on:
        - db
        - redis
      environment:
        - DJANGO_SETTINGS_MODULE=config.settings
        # í™˜ê²½ ë³€ìˆ˜ë“¤
      networks:
        - app-network
  
    # ë‹¤ë¥¸ ì„œë¹„ìŠ¤ë“¤
  networks:
    app-network:
      driver: bridge
  ```

<br><br><br>

# 10. Result (ìˆ˜í–‰ ê²°ê³¼)

**ì‚¬ì´íŠ¸ í™”ë©´**
![image](https://github.com/user-attachments/assets/59c1f86d-b49f-4abe-aaf3-9c2b8a934d6f)
![image](https://github.com/user-attachments/assets/7cebbc41-d857-40f0-91b3-03a5564e7fd6)
![image](https://github.com/user-attachments/assets/77fe7200-c15c-4e1f-acc0-c67adb8b4e6e)
![image](https://github.com/user-attachments/assets/33070908-7837-488f-945e-887606ea4734)
![image](https://github.com/user-attachments/assets/8bbaab13-781f-4f1f-8f81-6fdbc901fe75)


**íšŒì› ì˜ˆì¸¡**

<br><br><br>

# 11. Tech Stack (ê¸°ìˆ  ìŠ¤íƒ)
<div align=left><h3>ğŸ•¹ï¸ Frontend</div>
<div align=left>
  <img src="https://img.shields.io/badge/Vue.js-4FC08D?style=for-the-badge&logo=Vue.js&logoColor=white">
  <img src="https://img.shields.io/badge/Vuetify-1867C0?style=for-the-badge&logo=Vuetify&logoColor=white">
  <img src="https://img.shields.io/badge/JavaScript-F7DF1E?style=for-the-badge&logo=JavaScript&logoColor=white">
  <img src="https://img.shields.io/badge/TypeScript-3178C6?style=for-the-badge&logo=TypeScript&logoColor=white">
  <img src="https://img.shields.io/badge/D3.js-F9A03C?style=for-the-badge&logo=D3.js&logoColor=white">
  <img src="https://img.shields.io/badge/Axios-5A29E4?style=for-the-badge&logo=Axios&logoColor=white">
  <img src="https://img.shields.io/badge/CSS3-1572B6?style=for-the-badge&logo=CSS3&logoColor=white">
  <img src="https://img.shields.io/badge/HTML5-E34F26?style=for-the-badge&logo=HTML5&logoColor=white">
</div>

<div align=left><h3>ğŸ•¹ï¸ Backend</div>
<div aling=left>
  <img src="https://img.shields.io/badge/Django-092E20?style=for-the-badge&logo=Django&logoColor=white">
  <img src="https://img.shields.io/badge/Python-3776AB?style=for-the-badge&logo=Python&logoColor=white">
  <img src="https://img.shields.io/badge/Pandas-150458?style=for-the-badge&logo=Pandas&logoColor=white">
  <img src="https://img.shields.io/badge/Redis-FF4438?style=for-the-badge&logo=Redis&logoColor=white">
  <img src="https://img.shields.io/badge/KakaoDev-221E68?style=for-the-badge&logo=Kakao&logoColor=white">
  <img src="https://img.shields.io/badge/FastAPI-009688?style=for-the-badge&logo=FastAPI&logoColor=white">
  <img src="https://img.shields.io/badge/MySQL-4479A1?style=for-the-badge&logo=MySQL&logoColor=white">
</div>

<div align=left><h3>ğŸ•¹ï¸ AI Core</div>
<div align=left>
  <img src="https://img.shields.io/badge/OpenAI-412991?style=for-the-badge&logo=OpenAI&logoColor=white">
  <img src="https://img.shields.io/badge/Transformer-131622?style=for-the-badge&logo=Transformer&logoColor=white">
  <img src="https://img.shields.io/badge/TensorFlow-FF6F00?style=for-the-badge&logo=TensorFlow&logoColor=white">
  <img src="https://img.shields.io/badge/Pandas-150458?style=for-the-badge&logo=Pandas&logoColor=white">
  <img src="https://img.shields.io/badge/Numpy-013243?style=for-the-badge&logo=Numpy&logoColor=white">
  <img src="https://img.shields.io/badge/Python-3776AB?style=for-the-badge&logo=Python&logoColor=white">
</div>

<div align=left><h3>ğŸ•¹ï¸ Deploy & Infra</div>
<div align="left">
  <img src="https://img.shields.io/badge/Docker-2496ED?style=for-the-badge&logo=Docker&logoColor=white">
  <img src="https://img.shields.io/badge/GitHub Runner-2088FF?style=for-the-badge&logo=GitHub Runner&logoColor=white">
  <img src="https://img.shields.io/badge/GitHub Actions-2088FF?style=for-the-badge&logo=GitHub Actions&logoColor=white">
  <img src="https://img.shields.io/badge/Amazon Web Services-232F3E?style=for-the-badge&logo=Amazon Web Services&logoColor=white">
  <img src="https://img.shields.io/badge/NGINX-009639?style=for-the-badge&logo=NGINX&logoColor=white">
</div>

<div align=left><h3>ğŸ•¹ï¸ Dev Tool </div>
<div align="left">
  <img src="https://img.shields.io/badge/GitHub-181717?style=for-the-badge&logo=GitHub&logoColor=white">
  <img src="https://img.shields.io/badge/Slack-4A154B?style=for-the-badge&logo=Slack&logoColor=white">
  <img src="https://img.shields.io/badge/Visual Studio Code-008CFF?style=for-the-badge&logo=Visual Studio Code&logoColor=white">
  <img src="https://img.shields.io/badge/Notion-000000?style=for-the-badge&logo=Notion&logoColor=white">
  <img src="https://img.shields.io/badge/Pycharm-000000?style=for-the-badge&logo=Pycharm&logoColor=white">
  <img src="https://img.shields.io/badge/git-F05032?style=for-the-badge&logo=git&logoColor=white">
</div>

                                                                                                       
<br><br><br>

# 12. Deploy Issue (ë°°í¬ ì´ìŠˆ)
- **FastAPI ìˆ˜ë™ ë°°í¬ ì¤‘ Docker Image ì˜¤ë¥˜**
  ![image](https://github.com/user-attachments/assets/aacbbebb-578a-4baf-94a9-1de2f7199b89)
  - **ì˜¤ë¥˜** : "Error response from daemon: mainfest unknown"
  - **ì˜¤ë¥˜ ì›ì¸** : ì§„í–‰í•  Docker Imageê°€ ì—†ê±°ë‚˜ ì‚¬ìš©ì´ ë¶ˆê°€í•œ ìƒí™©
  - **ì˜¤ë¥˜ í•´ê²°** : Docker Build ê³¼ì •ì—ì„œ ì‚¬ìš©í•œ Github ê³„ì •ì€ Loginí•  ë•Œë„ ë™ì¼í•˜ê²Œ ì‚¬ìš©
    - Docker Buildë¥¼ ì§„í–‰í•˜ëŠ” í”„ë¡œì íŠ¸ì—ì„œë„ Docker Login <br>
      ```bash
      echo "GHCRí† í°" | docker login ghcr.io -u ê³„ì • --password-stdin
      ```
    - AWS ì ‘ì† í›„ docker-compose.yml íŒŒì¼ êµ¬ë™ ì‹œì—ë„ Docker Login <br>
      ```bash
      echo "GHCRí† í°" | docker login ghcr.io -u ê³„ì • --password-stdin
      ```
    - .envë¡œ ê´€ë¦¬í•˜ëŠ” ì •ë³´ì— Github ê³„ì •ì€ docker build êµ¬ì„±í•  ë•Œ ì‚¬ìš©í•œ ê³„ì •


<br><br><br>

# 13. í…ŒìŠ¤íŠ¸ ë³´ê³ ì„œ (CI í…ŒìŠ¤íŠ¸ ê²°ê³¼)
<table align="center">
  <tbody>
    <tr>
      <td align="center"><b>Frontend</b></td>
      <td align="center"><b>Backend</b></td>
      <td align="center"><b>FastAPI</b></td>
    </tr>
    <tr>
      <td><img src="https://github.com/user-attachments/assets/4b2b88ff-7832-4bf1-9733-dea2ea70a4a0"/></td>
      <td><img src="https://github.com/user-attachments/assets/dbc03d11-ea42-4556-8793-0a2628a2964c"/></td>
      <td><img src="https://github.com/user-attachments/assets/e0b19c9b-31e6-429a-8668-fc1d7d605854"/></td>
    </tr>
  </tbody>
</table>

<br><br><br>

# 14. í•œ ì¤„ íšŒê³ 
### ğŸŒŠ ì´ê²½ë¯¼

### ğŸ˜ˆ ì„ì˜í›ˆ

### ğŸŒ‹ ì •ì˜í—Œ



